{"about":{"slug":"about","filePath":"about.md","title":"about","links":[],"tags":["blog"],"content":"这是关于作者页面","date":"2025-08-16T07:21:08.000Z"},"blog-with-obsidian-quartz4":{"slug":"blog-with-obsidian-quartz4","filePath":"blog-with-obsidian-quartz4.md","title":"使用Obisidian和Quartz 4编写博客","links":[],"tags":["blog"],"content":"安装Quartz 4\ngit clone github.com/Kuhbz/quartz.git\ncd quartz\nnpm i\nnpx quartz create\n\n\n                  \n                  Warning\n                  \n                \n\n\n我安装的是我修改后配置好后的版本，如果要安装官方的版本请把仓库地址替换为：github.com/jackyzha0/quartz.git\n\n\n\n用Obisidian编写文章\nfrontmatter\nQuartz 还允许在笔记中指定称为frontmatter的附加元数据。\n---\ntitle: Example Title\ndraft: false\ntags:\n  - example-tag\n---\n \nThe rest of your content lives here. You can use **Markdown** here :)\n\nQuartz 原生支持的一些常见前置字段：\n\ntitle：页面标题。如果没有提供，Quartz 将使用文件名称作为标题。\ndescription：用于链接预览的页面描述。\npermalink：页面的自定义 URL，即使文件路径发生变化也将保持不变。\naliases：此笔记的其他名称。这是一个字符串列表。\ntags：此笔记的标签。\ndraft：是否发布页面。\ndate：表示笔记发布日期的字符串。使用YYYY-MM-DD格式。\n\n\n\npriority: 用于查询日期信息的数据源。优先级最高。可能值为&quot;frontmatter&quot;、&quot;git&quot;和&quot;filesystem&quot;。默认为[&quot;frontmatter&quot;, &quot;git&quot;, &quot;filesystem&quot;]。如果您依赖git日期，请确保defaultDateType设置modified为quartz.config.ts。\nHardLineBreaks: 此插件会自动将 Markdown 文本中的单行换行符转换为 HTML 输出中的硬换行符。由于此插件不符合实际 Markdown 的语义，因此默认不启用。但如果您想与Obsidian保持一致，可以启用它。\n\n部署到Github Pages\n为了方便访问，我把生成的静态文件单独部署到kuhbz.github.io中，并且Giscus也使用这个仓库的discussions。\n步骤一：创建 &lt;你的用户名&gt;.github.io 仓库\n如果这个仓库还不存在，请先在你的 GitHub 上创建它。这是一个特殊的仓库，GitHub 会自动将它的 main (或 master) 分支部署为你的用户主页，网址就是 https://&lt;你的用户名&gt;.github.io。举例：我的用户名为kuhbz，那么仓库名就是kuhbz.github.io，访问地址就是kuhbz.github.io\n步骤二：生成并配置部署密钥\n为了让你当前仓库的 Action 能够安全地推送到 kuhbz.github.io 仓库，最安全的方法是使用部署密钥（Deploy Keys）。\n\n\n生成 SSH 密钥对：\n在你的本地电脑上打开终端，运行以下命令来生成一个新的 SSH 密钥对。当提示输入文件名时，可以输入 deploy_key，并且不要设置密码（直接按回车）。\nssh-keygen -t ed25519 -N &quot;&quot; -f deploy_key\n这会生成两个文件：deploy_key (私钥) 和 deploy_key.pub (公钥)。\n\n\n添加公钥到 kuhbz.github.io 仓库：\n\n打开 deploy_key.pub 文件，复制里面的全部内容。\n进入 kuhbz.github.io 仓库的 GitHub 页面。\n点击 “Settings” → “Deploy keys” → “Add deploy key”。\n给它一个标题，比如 “Quartz Deploy”。\n将公钥内容粘贴到 “Key” 字段中。\n非常重要：勾选 “Allow write access” 复选框。\n点击 “Add key”。\n\n\n\n添加私钥到你当前 Quartz 仓库：\n\n打开 deploy_key 文件（私钥），复制里面的全部内容。\n进入你存放 Quartz 源码的仓库的 GitHub 页面。\n点击 “Settings” → “Secrets and variables” → “Actions”。\n点击 “New repository secret”。\n将 Secret 的名字设置为 DEPLOY_KEY。\n将私钥内容粘贴到 “Secret” 字段中。\n点击 “Add secret”。\n\n\n\n步骤三：创建 deploy.yml 工作流\n现在，新建 .github/workflows/deploy.yml 文件。这个新版本的工作流使用了peaceiris/actions-gh-pages 这个流行的 Action 来处理跨仓库部署。\nname: Deploy Quartz site to kuhbz.github.io\n \non:\n  push:\n    branches:\n      - v4 # 确保这是你的源码主分支\n \njobs:\n  build-and-deploy:\n    runs-on: ubuntu-22.04\n    steps:\n      - name: Checkout source code\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0 # 获取所有git历史记录，用于日期等信息\n \n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: 22\n \n      - name: Install Dependencies\n        run: npm ci\n \n      - name: Build Quartz\n        run: npx quartz build\n \n      - name: Deploy to kuhbz.github.io\n        uses: peaceiris/actions-gh-pages@v4\n        with:\n          # 这是我们上一步创建的私钥Secret\n          deploy_key: ${{ secrets.DEPLOY_KEY }}\n          # 这是你的目标仓库\n          external_repository: kuhbz/kuhbz.github.io\n          # 这是要部署的文件夹\n          publish_dir: ./public\n          # 这是目标仓库的分支，对于用户主页通常是 main 或 master\n          publish_branch: main\n          # 确保 CNAME 文件被保留（如果你使用自定义域名）\n          keep_files: false\n          # 提交代码的用户名和邮箱\n          user_name: &#039;github-actions[bot]&#039;\n          user_email: &#039;github-actions[bot]@users.noreply.github.com&#039;\n          # 提交信息\n          commit_message: &quot;Deploy Quartz site from ${{ github.sha }}&quot;\n总结\n完成以上步骤后：\n\n保存你对 deploy.yml 文件的修改。\n运行 npx quartz sync 来提交并推送你的更改。\n\n这次推送会触发新的 GitHub Actions 工作流。它会：\n\n构建你的 Quartz 网站，生成静态文件到 public 目录。\n使用你配置的部署密钥，安全地将 public 目录下的所有内容推送到 kuhbz.github.io 仓库的 main 分支。\n\n稍等片刻，网站就会成功部署在 kuhbz.github.io 上了。\n目录2\nmermai测试\nsequenceDiagram\n    Alice-&gt;&gt;+John: Hello John, how are you?\n    Alice-&gt;&gt;+John: John, can you hear me?\n    John--&gt;&gt;-Alice: Hi Alice, I can hear you!\n    John--&gt;&gt;-Alice: I feel great!\n\nquartz/cli/handlers.js 文件中的 handleSync 函数揭示了 npx quartz sync 命令的完整工作流程。\n该命令本质上是围绕 git 命令的一个封装，旨在简化将本地内容与远程 git 仓库同步的过程。\n以下是它的详细步骤：\n\n\n备份内容 (stash)：\n\n命令首先会调用 stashContentFolder(contentFolder) 函数。这个函数的作用是使用 git stash push\n—include-untracked — path/to/content 命令，将 content\n目录下的所有更改（包括未跟踪的文件）都暂存起来。\n这样做是为了保护用户的本地内容，避免在后续的 git pull 操作中产生冲突。\n\n\n\n拉取更新 (pull)：\n\n如果用户没有使用 —no-pull 标志，命令会执行 gitPull(ORIGIN_NAME, QUARTZ_SOURCE_BRANCH)。\n这会运行 git pull —no-rebase —autostash origin v4 命令，从远程的 origin 拉取 v4\n分支的最新更改。—autostash 选项会自动处理本地的非 content 目录的更改。\n\n\n\n恢复内容 (pop)：\n\n拉取更新后，命令会调用 popContentFolder(contentFolder)，它会执行 git stash pop 来恢复之前暂存的\ncontent 目录。\n如果 git pull 导致了冲突，git stash pop 可能会失败，这时 git 会提示用户手动解决冲突。\n\n\n\n提交更改 (commit)：\n\n如果用户没有使用 —no-commit 标志，命令会自动创建一个 git 提交。\n它会执行 git add . 来暂存所有更改。\n然后，它会使用一个默认的提交信息（例如 “Quartz sync: Aug 17, 2025, 10:30 AM”）或者用户通过 -m\n标志提供的自定义信息来执行 git commit。\n\n\n\n推送更改 (push)：\n\n最后，如果用户没有使用 —no-push 标志，命令会执行 git push -uf ORIGIN_NAME\n，将本地的提交强制推送到远程的 origin 仓库。\n\n\n\n总结来说，npx quartz sync 通过自动化的 stash、pull、commit 和 push\n操作，为用户提供了一个一站式的解决方案来同步他们的 Quartz 笔记。它简化了版本控制的复杂性，让不熟悉 git\n的用户也能轻松地管理他们的数字花园。","date":"2025-08-16T08:38:14.000Z"},"friends":{"slug":"friends","filePath":"friends.md","title":"友情链接","links":[],"tags":["blog"],"content":"互换友链请在这个页面留言。","date":"2025-08-16T07:21:08.000Z"}}